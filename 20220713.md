## 📘 실용주의 프로그래머

### 4장 실용주의 편집증(p.162 ~ p.180)

#### 단정문으로 불가능한 상황을 예방하라

가장 간단하게 추가하는 방법은 단정문을 사용하는 것이다. 대부분의 언어 규현에서 조건이 참인지 거짓인지 확인하는 assert의 일종을 찾을 수 있을 것이다. 이런 단정문은 엄청나게 유용하다. 매개변수나 결과가 절대 null이어서는 안 된다면 명시적으로 검사하라.

하지만 진짜 오류를 처리해야 하는 곳에 단정을 대신 사용하지는 말라. 단정은 결코 일어나면 안 되는 것들을 검사한다.
문제를 발견하려고 넣은 코드가 오히려 새로운 문제를 만드는 결과를 낳는다면 상당히 당황스러울 것이다.

#### 단정 기능을 켜 둬라.

단정문에 관한 흔한 오해

> 단정은 코드를 느리게 만든다. 일단 코드가 테스트되고 배포된 다음에는 더 이상 단정이 필요하지 않다. 단정은 디버깅 도구일 뿐이다.

프로그램을 출시 할 때 단정 기능으 ㄹ꺼 버리는 것은 줄타기 곡예를 하면서 연습으로 한 번 건너 봤다고 그물 없이 건너는 것과 비슷하다. 성능 문제가 있다 하더라도 정말 문제가 되는 단정문만 끄도록 하자.

#### 리소스 사용의 균형

우리는 코딩할 때 언제나 리소스를 관리한다. **자신이 시작한 것은 자신이 끝내라.** 리소스를 할당하는 함수나 객체가 리소스를 해제하는 책임 역시 져야한다는 뜻이다.

#### 나쁜 예외 처리 방식

```
begin
  thing = allocate_resource()
  process(thing)
finally
  deallocate(thing)
end
```

위처럼 코드를 작성하게 되면 리소스 할당이 실패했을 때 할당된 적 없는 thing을 해제하려고 할 것 이다.
예외가 발생할 수 있는 경우 리소스를 해제하는 올바른 방식은 아래와 같다.

```
thing = allocate_resource()
begin
  process(thing)
finally
  deallocate(thing)
end
```

#### 헤드라이트를 앞서가지 말라

우리는 너무 먼 미래는 내다볼 수 없고, 정면에서 벗어난 곳일수록 더 어둡다. 그래서 실용주의 프로그래머에게는 확고한 규칙이 있다.

**작은 단계들을 밟아라. 언제나** 더 진행하기 전에 피드백을 확인하고 조정하라. 피드백의 빈도를 여러분의 제한 속도라고 생각하라.
미래의 유지 보수를 고려해서 설계해야하는 것? 맞다. 하지만 ㅇ여러분이 볼 수 있는 미래까지만 고려해야 한다. 미래가 어떤 모습일지 더 많이 예측하려 하면 할수록 여러분이 틀릴 가능성은 계속 높아질 것이다.

### 🤓 느낀점

위에서 예시로 든 나쁜 예외 처리 방식을 보면서 try~catch~finally 구문을 작성 할 때 리소스 할당에 대해서 깊게 생각해 본적이 없었다. 리소스를 미리 할당하고 그 후에 예외가 발생할 상황을 작성해야 한다는 것!을 새로 깨닫게 되었다.
